<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack4升级到webpack5 | Attraction11</title>
    <meta name="description" content="个人博客">
    <link rel="stylesheet" href="/assets/style.95d26555.css">
    <link rel="modulepreload" href="/assets/app.b5247682.js">
    <link rel="modulepreload" href="/assets/JavaScript_Engineering_WebpackToV5.md.fcc6a7b7.lean.js">
    
    <link rel="icon" href="/docs-logo.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-04c1d245><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c9cfc3c4></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c9cfc3c4> Skip to content </a><!--]--><!----><header class="VPNav" data-v-04c1d245 data-v-ea4052b4><div class="VPNavBar has-sidebar" data-v-ea4052b4 data-v-36046f86><div class="container" data-v-36046f86><div class="VPNavBarTitle has-sidebar" data-v-36046f86 data-v-2ca9a22c><a class="title" href="/" data-v-2ca9a22c><!--[--><!--]--><!--[--><img class="VPImage logo" src="/docs-logo.png" alt data-v-265535e3><!--]--><!--[-->Attraction11<!--]--><!--[--><!--]--></a></div><div class="content" data-v-36046f86><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-36046f86 data-v-2129ae7b><span id="main-nav-aria-label" class="visually-hidden" data-v-2129ae7b>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 前端基础 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/HTMLCSS/Index.html" data-v-5a68840c data-v-7a3e2c60><!--[-->HTML与CSS<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/Functional/" data-v-5a68840c data-v-7a3e2c60><!--[-->函数式编程<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/JSCore/" data-v-5a68840c data-v-7a3e2c60><!--[-->JS核心原理<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/Asynchronous/" data-v-5a68840c data-v-7a3e2c60><!--[-->JS异步编程<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/ESFeatures/" data-v-5a68840c data-v-7a3e2c60><!--[-->ES新特性<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/TypeScript/" data-v-5a68840c data-v-7a3e2c60><!--[-->TS语言<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/Performance/" data-v-5a68840c data-v-7a3e2c60><!--[-->性能优化<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/LeetCode/" data-v-5a68840c data-v-7a3e2c60><!--[-->数据结构与算法<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/WebSafety/" data-v-5a68840c data-v-7a3e2c60><!--[-->网络与安全<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/Engineering/" data-v-5a68840c data-v-7a3e2c60><!--[-->项目工程化<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/JavaScript/Module/" data-v-5a68840c data-v-7a3e2c60><!--[-->杂记<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 前端框架 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/Framework/Vue/Introduce.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Vue<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/Framework/React/React.html" data-v-5a68840c data-v-7a3e2c60><!--[-->React<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/Framework/Render/ServeRender.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Render<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/Framework/StaticSite/Gatsby.html" data-v-5a68840c data-v-7a3e2c60><!--[-->StaticSite<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 全栈开发 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/Node/Introduce.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Node.js 编程<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/Nest/Introduce.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Nest.js 应用<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/Redis/Introduce.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Redis 应用<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/MongoDB/Introduce.html" data-v-5a68840c data-v-7a3e2c60><!--[-->MongoDB 应用<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/GraphQL/" data-v-5a68840c data-v-7a3e2c60><!--[-->GraphQL API 开发<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/FullStack/Nginx/" data-v-5a68840c data-v-7a3e2c60><!--[-->Nginx 配置<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 泛客户端开发 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/PanClient/UniApp/" data-v-5a68840c data-v-7a3e2c60><!--[-->UniApp<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/PanClient/RN/" data-v-5a68840c data-v-7a3e2c60><!--[-->React Native<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/PanClient/Electron/" data-v-5a68840c data-v-7a3e2c60><!--[-->Electron<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 技术方案 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/MicroFrontend/WebCli.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Micro Frontend<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/TestAutomation/WebCli.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Test Automation<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/DataVisualization/WebCli.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Data Visualization<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/Serverless/WebCli.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Serverless<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/BusinessScene/Login.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Business Scene<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/ProgramTopics/InterviewBible/" data-v-5a68840c data-v-7a3e2c60><!--[-->Interview Bible<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2129ae7b data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e95fa1e4><span class="text" data-v-e95fa1e4><!----> 随机文章 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e95fa1e4><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><div class="items" data-v-d7943406><!--[--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/Git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Git常用操作.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Linux基本命令.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/Nginx%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html" data-v-5a68840c data-v-7a3e2c60><!--[-->Nginx基本使用.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/RegExp%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8.html" data-v-5a68840c data-v-7a3e2c60><!--[-->RegExp介绍与使用.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/VsCode%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.html" data-v-5a68840c data-v-7a3e2c60><!--[-->VsCode插件开发.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E5%8A%9B%E6%89%A3%E9%A2%98%E8%AE%B0%E5%BD%95.html" data-v-5a68840c data-v-7a3e2c60><!--[-->力扣题记录.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95.html" data-v-5a68840c data-v-7a3e2c60><!--[-->小程序开发记录.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE.html" data-v-5a68840c data-v-7a3e2c60><!--[-->常用快捷键.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" data-v-5a68840c data-v-7a3e2c60><!--[-->排序算法.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E6%94%B6%E5%BD%95%E7%B2%BE%E9%80%89%E4%B9%A6%E7%B1%8D.html" data-v-5a68840c data-v-7a3e2c60><!--[-->收录精选书籍.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86.html" data-v-5a68840c data-v-7a3e2c60><!--[-->网络相关知识.md<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d7943406 data-v-5a68840c><a class="VPLink link" href="/notes/%E9%9D%A2%E8%AF%95%E8%BD%AF%E6%8A%80%E8%83%BD.html" data-v-5a68840c data-v-7a3e2c60><!--[-->面试软技能.md<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-36046f86 data-v-01996bc4><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-01996bc4 data-v-aa122b2e data-v-4456f1e0><span class="check" data-v-4456f1e0><span class="icon" data-v-4456f1e0><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-aa122b2e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-aa122b2e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-36046f86 data-v-6fcdd6cc data-v-673831b0><!--[--><a class="VPSocialLink" href="https://github.com/attraction11" target="_blank" rel="noopener" data-v-673831b0 data-v-87c79f46><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-36046f86 data-v-4a619ef7 data-v-e95fa1e4><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e95fa1e4><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-e95fa1e4><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-e95fa1e4><div class="VPMenu" data-v-e95fa1e4 data-v-d7943406><!----><!--[--><!--[--><!----><div class="group" data-v-4a619ef7><div class="item appearance" data-v-4a619ef7><p class="label" data-v-4a619ef7>Appearance</p><div class="appearance-action" data-v-4a619ef7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-4a619ef7 data-v-aa122b2e data-v-4456f1e0><span class="check" data-v-4456f1e0><span class="icon" data-v-4456f1e0><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-aa122b2e><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-aa122b2e><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-4a619ef7><div class="item social-links" data-v-4a619ef7><div class="VPSocialLinks social-links-list" data-v-4a619ef7 data-v-673831b0><!--[--><a class="VPSocialLink" href="https://github.com/attraction11" target="_blank" rel="noopener" data-v-673831b0 data-v-87c79f46><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-36046f86 data-v-e7032f7c><span class="container" data-v-e7032f7c><span class="top" data-v-e7032f7c></span><span class="middle" data-v-e7032f7c></span><span class="bottom" data-v-e7032f7c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-04c1d245 data-v-afebc1bf><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-afebc1bf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-afebc1bf><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-afebc1bf>Menu</span></button><a class="top-link" href="#" data-v-afebc1bf> Return to top </a></div><aside class="VPSidebar" data-v-04c1d245 data-v-18c1c2a0><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18c1c2a0><span class="visually-hidden" id="sidebar-aria-label" data-v-18c1c2a0> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>HTML与CSS</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/Index.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>HTML</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/Layout.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>CSS布局</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/Flex.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Flex布局</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/Grid.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Grid网格布局</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/Skill.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>CSS常用技巧</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/HTMLCSS/RandomRecord.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>CSS问答题</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>函数式编程</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/Functional/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>函数式编程范式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Functional/closure.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>闭包介绍</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Functional/pureFunction.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>纯函数</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Functional/currying.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>柯里化</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Functional/combination.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>函数组合</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>JS核心原理</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS数据类型</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/Copy.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>实现深浅拷贝</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/Inherit.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS继承</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/Call.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>底层逻辑</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/Closure.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS闭包</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/Stringify.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JSON.stringify</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/ArrayLike.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS 的类数组</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/ArrayFlat.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>数组扁平化</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/ArraySort.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>数组排序</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/TheorySort.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>sort排序原理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/JSCore/ArrayCode.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>手写JS数组方法</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>JS异步编程</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>同步与异步模式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/promise.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Promise介绍</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/promiseCode.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>手写Promise</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/this.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS中的this</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/objectOriented.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>面向对象</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/heap&amp;stack.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>理解堆栈执行</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Asynchronous/jsConcepts.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>33个JS概念</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>ES新特性</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/ESFeatures/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>ES 新特性</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>TS语言</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/TypeScript/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>基础语法</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/TypeScript/ToolType.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>工具类型</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>性能优化</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/Performance/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS内存管理及回收</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Performance/Execute.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS代码执行</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Performance/Check.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS性能检测</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Performance/Optimize.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>JS性能优化</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Performance/Overall.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>前端性能优化</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>数据结构与算法</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/LeetCode/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>数据结构</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/LeetCode/Array.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>数组算法</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>网络与安全</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/WebSafety/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>前端安全</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/WebSafety/Transfer.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>网络传输</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>项目工程化</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/Engineering/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>脚手架工具</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Engineering/Automate.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>自动化构建</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Engineering/Webpack.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Webpack解析</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Engineering/Webpack4V5.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Webpack对比</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/JavaScript/Engineering/WebpackToV5.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>Webpack升级</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Engineering/CodeStandard.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>规范化标准</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-18c1c2a0><section class="VPSidebarGroup collapsible" data-v-18c1c2a0 data-v-174c8078><div class="title" role="button" data-v-174c8078><h2 class="title-text" data-v-174c8078>杂记</h2><div class="action" data-v-174c8078><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-174c8078><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-174c8078><!--[--><!--[--><a class="VPLink link link" href="/JavaScript/Module/" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>问答题一</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/JavaScript/Module/Two.html" style="padding-left:0px;" data-v-aef2ae43 data-v-7a3e2c60><!--[--><span class="link-text" data-v-aef2ae43>问答题二</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-04c1d245 data-v-29a3e9f4><div class="VPDoc has-sidebar has-aside" data-v-29a3e9f4 data-v-97ada51d><div class="container" data-v-97ada51d><div class="aside" data-v-97ada51d><div class="aside-curtain" data-v-97ada51d></div><div class="aside-container" data-v-97ada51d><div class="aside-content" data-v-97ada51d><div class="VPDocAside" data-v-97ada51d data-v-2f38cef5><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-2f38cef5 data-v-6bc23c6e><div class="content" data-v-6bc23c6e><div class="outline-marker" data-v-6bc23c6e></div><div class="outline-title" data-v-6bc23c6e>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6bc23c6e><span class="visually-hidden" id="doc-outline-aria-label" data-v-6bc23c6e> Table of Contents for current page </span><ul class="root" data-v-6bc23c6e data-v-7ea186a3><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-2f38cef5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-97ada51d><div class="content-container" data-v-97ada51d><!--[--><!--]--><main class="main" data-v-97ada51d><div style="position:relative;" class="vp-doc _JavaScript_Engineering_WebpackToV5" data-v-97ada51d><div><h1 id="webpack4升级到webpack5" tabindex="-1">webpack4升级到webpack5 <a class="header-anchor" href="#webpack4升级到webpack5" aria-hidden="true">#</a></h1><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-hidden="true">#</a></h2><p>最近接手了公司内部webpack相关的依赖包，于是打算优化一波。考虑到webpack5已经正式发布近两年，跟webpack相关的依赖包应该适配的差不多了。计划先把webpack4升级到webpack5，然后基于webpack5再进行优化。</p><p>升级前用的是 &quot;webpack&quot;: &quot;^4.42.1&quot; ，升级后用的是 &quot;webpack&quot;: &quot;^5.72.1&quot; 。</p><p>笔者采用的升级webpack的方式是先一键升级所有的依赖包，然后一个一个地去解决运行过程中的报错。</p><p>首先，全局安装npm-check-updates：</p><blockquote><p>yarn global add npm-check-updates</p></blockquote><p>然后在项目中执行 ncu -u ，这样项目的package.json会把所有的依赖包都更新到最新版本。然后执行 yarn 。升级完就可以开启漫长的debug之旅了。</p><h2 id="terser-webpack-plugin语法报错" tabindex="-1">terser-webpack-plugin语法报错 <a class="header-anchor" href="#terser-webpack-plugin语法报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid options object. Terser Plugin has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using an options object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> options</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">an</span><span style="color:#DBD7CAEE;"> unknown property </span><span style="color:#758575DD;">&#39;cache&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { test?,</span><span style="color:#BD976A;"> include</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> exclude</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> terserOptions</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> extractComments</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> parallel</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> minify</span><span style="color:#DBD7CAEE;">? }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid options object. Terser Plugin has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using an options object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> options</span><span style="color:#393A34;"> has </span><span style="color:#998418;">an</span><span style="color:#393A34;"> unknown property </span><span style="color:#A0ADA0;">&#39;cache&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#393A34;">   object { test?,</span><span style="color:#B07D48;"> include</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> exclude</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> terserOptions</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> extractComments</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> parallel</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> minify</span><span style="color:#393A34;">? }</span></span>
<span class="line"></span></code></pre></div><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">minimizer: [</span></span>
<span class="line"><span style="color:#dbd7caee;">	new TerserPlugin({</span></span>
<span class="line"><span style="color:#dbd7caee;">		cache: true,</span></span>
<span class="line"><span style="color:#dbd7caee;">		parallel: true,</span></span>
<span class="line"><span style="color:#dbd7caee;">		terserOptions: {</span></span>
<span class="line"><span style="color:#dbd7caee;">			mangle: false, // Note `mangle.properties` is `false` by default.</span></span>
<span class="line"><span style="color:#dbd7caee;">		},</span></span>
<span class="line"><span style="color:#dbd7caee;">	}),</span></span>
<span class="line"><span style="color:#dbd7caee;">]</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">minimizer: [</span></span>
<span class="line"><span style="color:#393a34;">	new TerserPlugin({</span></span>
<span class="line"><span style="color:#393a34;">		cache: true,</span></span>
<span class="line"><span style="color:#393a34;">		parallel: true,</span></span>
<span class="line"><span style="color:#393a34;">		terserOptions: {</span></span>
<span class="line"><span style="color:#393a34;">			mangle: false, // Note `mangle.properties` is `false` by default.</span></span>
<span class="line"><span style="color:#393a34;">		},</span></span>
<span class="line"><span style="color:#393a34;">	}),</span></span>
<span class="line"><span style="color:#393a34;">]</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>从报错来看，terser-webpack-plugin的配置属性发生了改变，现在已经没有 cache 这个选项了。</p><p>terser-webpack-plugin是用来压缩JavaScript代码的。不过webpack5已经自带了terser-webpack-plugin，如果说你用的是webpack5或者更高版本，同时还希望自定义配置，那么还是需要安装terser-webpack-plugin。</p><p>webpack4的时候可以通过terser-webpack-plugin的cache属性开启文件缓存。现在webpack5自身提供了持久化缓存机制，它能够将首次打包的结果缓存到硬盘中，等下次打包的时候就可以跳过一系类的耗时的操作，复用第一次的打包结果。可以通过以下配置开启持久化缓存：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">cache: {</span></span>
<span class="line"><span style="color:#dbd7caee;"> type: &#39;filesystem&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;"> version: &#39;yourVersion&#39;</span></span>
<span class="line"><span style="color:#dbd7caee;">}</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">cache: {</span></span>
<span class="line"><span style="color:#393a34;"> type: &#39;filesystem&#39;,</span></span>
<span class="line"><span style="color:#393a34;"> version: &#39;yourVersion&#39;</span></span>
<span class="line"><span style="color:#393a34;">}</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>缓存默认保存路径是 node_modules/.cache/webpack。这里要注意每当我们修改了webpack配置，记得更新cache的version，否则可能会出现因为重用了缓存导致配置没生效的问题。</p><p>综上，最后代码修改如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">  cache: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    type: &#39;filesystem&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">    version: &#39;3.8.1&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;">  optimization: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    minimizer: [</span></span>
<span class="line"><span style="color:#dbd7caee;">      new TerserPlugin({</span></span>
<span class="line"><span style="color:#dbd7caee;">        parallel: true,</span></span>
<span class="line"><span style="color:#dbd7caee;">        terserOptions: {</span></span>
<span class="line"><span style="color:#dbd7caee;">          mangle: false, // Note `mangle.properties` is `false` by default.</span></span>
<span class="line"><span style="color:#dbd7caee;">        },</span></span>
<span class="line"><span style="color:#dbd7caee;">      }),</span></span>
<span class="line"><span style="color:#dbd7caee;">    ],</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  }</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">  cache: {</span></span>
<span class="line"><span style="color:#393a34;">    type: &#39;filesystem&#39;,</span></span>
<span class="line"><span style="color:#393a34;">    version: &#39;3.8.1&#39;,</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;">  optimization: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    minimizer: [</span></span>
<span class="line"><span style="color:#393a34;">      new TerserPlugin({</span></span>
<span class="line"><span style="color:#393a34;">        parallel: true,</span></span>
<span class="line"><span style="color:#393a34;">        terserOptions: {</span></span>
<span class="line"><span style="color:#393a34;">          mangle: false, // Note `mangle.properties` is `false` by default.</span></span>
<span class="line"><span style="color:#393a34;">        },</span></span>
<span class="line"><span style="color:#393a34;">      }),</span></span>
<span class="line"><span style="color:#393a34;">    ],</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  }</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="fork-ts-checker-webpack-plugin语法报错" tabindex="-1">fork-ts-checker-webpack-plugin语法报错 <a class="header-anchor" href="#fork-ts-checker-webpack-plugin语法报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid configuration object. ForkTsCheckerWebpackPlugin has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using a configuration object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> configuration</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">an</span><span style="color:#DBD7CAEE;"> unknown property </span><span style="color:#758575DD;">&#39;reportFiles&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { async?,</span><span style="color:#BD976A;"> typescript</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> formatter</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> issue</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> logger</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> devServer</span><span style="color:#DBD7CAEE;">? }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid configuration object. ForkTsCheckerWebpackPlugin has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using a configuration object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> configuration</span><span style="color:#393A34;"> has </span><span style="color:#998418;">an</span><span style="color:#393A34;"> unknown property </span><span style="color:#A0ADA0;">&#39;reportFiles&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#393A34;">   object { async?,</span><span style="color:#B07D48;"> typescript</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> formatter</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> issue</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> logger</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> devServer</span><span style="color:#393A34;">? }</span></span>
<span class="line"></span></code></pre></div><p>fork-ts-checker-webpack-plugin 是在单独的进程上运行 TypeScript 类型检查器的 Webpack 插件。当文件发生改动需要重新转译和类型检查时，fork-ts-checker-webpack-plugin会开辟一个单独的进程去执行类型检查的任务，这样就不会影响 webpack 重新编译的速度。</p><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">plugins: [</span></span>
<span class="line"><span style="color:#dbd7caee;">  new ForkTsCheckerWebpackPlugin({</span></span>
<span class="line"><span style="color:#dbd7caee;">      memoryLimit: 4096,</span></span>
<span class="line"><span style="color:#dbd7caee;">      tsconfig: PATH.appDirectory + &#39;/tsconfig.json&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">      checkSyntacticErrors: true,</span></span>
<span class="line"><span style="color:#dbd7caee;">      reportFiles: [`${PATH.appSrc}/**/*.{ts,tsx}`],</span></span>
<span class="line"><span style="color:#dbd7caee;">    }),</span></span>
<span class="line"><span style="color:#dbd7caee;">]</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">plugins: [</span></span>
<span class="line"><span style="color:#393a34;">  new ForkTsCheckerWebpackPlugin({</span></span>
<span class="line"><span style="color:#393a34;">      memoryLimit: 4096,</span></span>
<span class="line"><span style="color:#393a34;">      tsconfig: PATH.appDirectory + &#39;/tsconfig.json&#39;,</span></span>
<span class="line"><span style="color:#393a34;">      checkSyntacticErrors: true,</span></span>
<span class="line"><span style="color:#393a34;">      reportFiles: [`${PATH.appSrc}/**/*.{ts,tsx}`],</span></span>
<span class="line"><span style="color:#393a34;">    }),</span></span>
<span class="line"><span style="color:#393a34;">]</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>fork-ts-checker-webpack-plugin从 4.1.3 升级到 7.2.11 ，这个plugin的API已经发生了改变。</p><p>改成：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">plugins: [</span></span>
<span class="line"><span style="color:#dbd7caee;">  new ForkTsCheckerWebpackPlugin({</span></span>
<span class="line"><span style="color:#dbd7caee;">      typescript: {</span></span>
<span class="line"><span style="color:#dbd7caee;">        memoryLimit: 4096,</span></span>
<span class="line"><span style="color:#dbd7caee;">        configFile: PATH.appDirectory + &#39;/tsconfig.json&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">        diagnosticOptions: { syntactic: false, semantic: false, declaration: false, global: false }</span></span>
<span class="line"><span style="color:#dbd7caee;">      },</span></span>
<span class="line"><span style="color:#dbd7caee;">    }),</span></span>
<span class="line"><span style="color:#dbd7caee;">]</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">plugins: [</span></span>
<span class="line"><span style="color:#393a34;">  new ForkTsCheckerWebpackPlugin({</span></span>
<span class="line"><span style="color:#393a34;">      typescript: {</span></span>
<span class="line"><span style="color:#393a34;">        memoryLimit: 4096,</span></span>
<span class="line"><span style="color:#393a34;">        configFile: PATH.appDirectory + &#39;/tsconfig.json&#39;,</span></span>
<span class="line"><span style="color:#393a34;">        diagnosticOptions: { syntactic: false, semantic: false, declaration: false, global: false }</span></span>
<span class="line"><span style="color:#393a34;">      },</span></span>
<span class="line"><span style="color:#393a34;">    }),</span></span>
<span class="line"><span style="color:#393a34;">]</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>diagnosticOptions选项用来设置哪些TypeScript语法需要检查。</p><h2 id="ignoreplugin报错" tabindex="-1">IgnorePlugin报错 <a class="header-anchor" href="#ignoreplugin报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid options object. Ignore Plugin has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using an options object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> options</span><span style="color:#DBD7CAEE;"> should be one of these:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { resourceRegExp,</span><span style="color:#BD976A;"> contextRegExp</span><span style="color:#DBD7CAEE;">? } | object { checkResource }</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   Details:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> options misses the property </span><span style="color:#758575DD;">&#39;resourceRegExp&#39;. Should be:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      RegExp</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">-&gt;</span><span style="color:#BD976A;"> A</span><span style="color:#DBD7CAEE;"> RegExp </span><span style="color:#4D9375;">to</span><span style="color:#DBD7CAEE;"> test the </span><span style="color:#B8A965;">request</span><span style="color:#DBD7CAEE;"> against.</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> options misses the property </span><span style="color:#758575DD;">&#39;checkResource&#39;. Should be:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">function</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">-&gt;</span><span style="color:#BD976A;"> A</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">filter</span><span style="color:#CB7676;"> function </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> resource </span><span style="color:#CB7676;">and</span><span style="color:#DBD7CAEE;"> context.</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid options object. Ignore Plugin has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using an options object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> options</span><span style="color:#393A34;"> should be one of these:</span></span>
<span class="line"><span style="color:#393A34;">   object { resourceRegExp,</span><span style="color:#B07D48;"> contextRegExp</span><span style="color:#393A34;">? } | object { checkResource }</span></span>
<span class="line"><span style="color:#393A34;">   Details:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> options misses the property </span><span style="color:#A0ADA0;">&#39;resourceRegExp&#39;. Should be:</span></span>
<span class="line"><span style="color:#393A34;">      RegExp</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">-&gt;</span><span style="color:#B07D48;"> A</span><span style="color:#393A34;"> RegExp </span><span style="color:#1E754F;">to</span><span style="color:#393A34;"> test the </span><span style="color:#998418;">request</span><span style="color:#393A34;"> against.</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> options misses the property </span><span style="color:#A0ADA0;">&#39;checkResource&#39;. Should be:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">function</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">-&gt;</span><span style="color:#B07D48;"> A</span><span style="color:#393A34;"> </span><span style="color:#998418;">filter</span><span style="color:#AB5959;"> function </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> resource </span><span style="color:#AB5959;">and</span><span style="color:#393A34;"> context.</span></span>
<span class="line"></span></code></pre></div><p>IgnorePlugin的作用是忽略第三方包指定目录，让这些指定目录不会被打包进去。比如moment包的locale文件夹包括了各国语言的目录，如果把所有语言都打包进去就会影响打包效率。</p><p>原来的配置：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">webpack</span><span style="color:#666666;">.</span><span style="color:#80A665;">IgnorePlugin</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">/</span><span style="color:#4D9375;">^</span><span style="color:#E6CC77;">\.\/</span><span style="color:#C4704F;">locale</span><span style="color:#4D9375;">$</span><span style="color:#C98A7DAA;">/</span><span style="color:#666666;">,</span><span style="color:#C4704F;"> </span><span style="color:#C98A7DAA;">/</span><span style="color:#C4704F;">moment</span><span style="color:#4D9375;">$</span><span style="color:#C98A7DAA;">/</span><span style="color:#666666;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">webpack</span><span style="color:#999999;">.</span><span style="color:#59873A;">IgnorePlugin</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">/</span><span style="color:#1E754F;">^</span><span style="color:#BDA437;">\.\/</span><span style="color:#AB5E3F;">locale</span><span style="color:#1E754F;">$</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#AB5E3F;">moment</span><span style="color:#1E754F;">$</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">)</span></span>
<span class="line"></span></code></pre></div><p>从报错来看，该plugin的语法发生了改变。改成：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">webpack</span><span style="color:#666666;">.</span><span style="color:#80A665;">IgnorePlugin</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">resourceRegExp</span><span style="color:#666666;">:</span><span style="color:#C4704F;"> </span><span style="color:#C98A7DAA;">/</span><span style="color:#4D9375;">^</span><span style="color:#E6CC77;">\.\/</span><span style="color:#C4704F;">locale</span><span style="color:#4D9375;">$</span><span style="color:#C98A7DAA;">/</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">contextRegExp</span><span style="color:#666666;">:</span><span style="color:#C4704F;"> </span><span style="color:#C98A7DAA;">/</span><span style="color:#C4704F;">moment</span><span style="color:#C98A7DAA;">/</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">webpack</span><span style="color:#999999;">.</span><span style="color:#59873A;">IgnorePlugin</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">resourceRegExp</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#1E754F;">^</span><span style="color:#BDA437;">\.\/</span><span style="color:#AB5E3F;">locale</span><span style="color:#1E754F;">$</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">contextRegExp</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#AB5E3F;">moment</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">})</span></span>
<span class="line"></span></code></pre></div><h2 id="devtool报错" tabindex="-1">devtool报错 <a class="header-anchor" href="#devtool报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid configuration object. Webpack has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using a configuration object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> configuration.devtool should match pattern </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">^(inline-|hidden-|eval-)?(nosources-)?(cheap-(module-)?)?source-map$</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">.</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   BREAKING CHANGE since webpack </span><span style="color:#4C9A91;">5</span><span style="color:#DBD7CAEE;">: The devtool option is more strict.</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   Please strictly follow the order of the keywords </span><span style="color:#CB7676;">in</span><span style="color:#DBD7CAEE;"> the pattern.</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid configuration object. Webpack has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using a configuration object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> configuration.devtool should match pattern </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">^(inline-|hidden-|eval-)?(nosources-)?(cheap-(module-)?)?source-map$</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">.</span></span>
<span class="line"><span style="color:#393A34;">   BREAKING CHANGE since webpack </span><span style="color:#2F798A;">5</span><span style="color:#393A34;">: The devtool option is more strict.</span></span>
<span class="line"><span style="color:#393A34;">   Please strictly follow the order of the keywords </span><span style="color:#AB5959;">in</span><span style="color:#393A34;"> the pattern.</span></span>
<span class="line"></span></code></pre></div><p>大概的意思是说：检查devtool的匹配，webpack5要求的匹配更严格。</p><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devtool: isEnvDevelopment ? &#39;cheap-module-eval-source-map&#39; : false,</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devtool: isEnvDevelopment ? &#39;cheap-module-eval-source-map&#39; : false,</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>改成：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devtool: isEnvDevelopment ? &#39;eval-cheap-module-source-map&#39; : false,</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devtool: isEnvDevelopment ? &#39;eval-cheap-module-source-map&#39; : false,</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="webpack-dev-server-publicpath报错" tabindex="-1">webpack-dev-server publicPath报错 <a class="header-anchor" href="#webpack-dev-server-publicpath报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid options object. Dev </span><span style="color:#B8A965;">Server</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using an options object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> options</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">an</span><span style="color:#DBD7CAEE;"> unknown property </span><span style="color:#758575DD;">&#39;publicPath&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { allowedHosts?,</span><span style="color:#BD976A;"> bonjour</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> client</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> compress</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> devMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> headers</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> historyApiFallback</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> host</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> hot</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> http2</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> https</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> ipc</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> liveReload</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> magicHtml</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onAfterSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onBeforeSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onListening</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> open</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> port</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> proxy</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> setupExitSignals</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> static</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> watchFiles</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> webSocketServer</span><span style="color:#DBD7CAEE;">? }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid options object. Dev </span><span style="color:#998418;">Server</span><span style="color:#393A34;"> has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using an options object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> options</span><span style="color:#393A34;"> has </span><span style="color:#998418;">an</span><span style="color:#393A34;"> unknown property </span><span style="color:#A0ADA0;">&#39;publicPath&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#393A34;">   object { allowedHosts?,</span><span style="color:#B07D48;"> bonjour</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> client</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> compress</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> devMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> headers</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> historyApiFallback</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> host</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> hot</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> http2</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> https</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> ipc</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> liveReload</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> magicHtml</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onAfterSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onBeforeSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onListening</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> open</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> port</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> proxy</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> setupExitSignals</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> static</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> watchFiles</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> webSocketServer</span><span style="color:#393A34;">? }</span></span>
<span class="line"></span></code></pre></div><p>这次webpack-dev-server从 &quot;^3.11.2&quot; 升级到了 &quot;^4.9.0&quot;。</p><p>publicPath用来设置项目跑在本地时，打包生成的文件所在的位置。</p><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    publicPath: appConfig.publicPath,</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">},</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    publicPath: appConfig.publicPath,</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">},</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>改成：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    devMiddleware: {</span></span>
<span class="line"><span style="color:#dbd7caee;">      publicPath: appConfig.publicPath,</span></span>
<span class="line"><span style="color:#dbd7caee;">    },</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    devMiddleware: {</span></span>
<span class="line"><span style="color:#393a34;">      publicPath: appConfig.publicPath,</span></span>
<span class="line"><span style="color:#393a34;">    },</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="webpack-dev-server-contentbase报错" tabindex="-1">webpack-dev-server contentBase报错 <a class="header-anchor" href="#webpack-dev-server-contentbase报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid options object. Dev </span><span style="color:#B8A965;">Server</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using an options object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> options</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">an</span><span style="color:#DBD7CAEE;"> unknown property </span><span style="color:#758575DD;">&#39;contentBase&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { allowedHosts?,</span><span style="color:#BD976A;"> bonjour</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> client</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> compress</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> devMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> headers</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> historyApiFallback</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> host</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> hot</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> http2</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> https</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> ipc</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> liveReload</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> magicHtml</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onAfterSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onBeforeSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onListening</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> open</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> port</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> proxy</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> setupExitSignals</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> static</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> watchFiles</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> webSocketServer</span><span style="color:#DBD7CAEE;">? }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid options object. Dev </span><span style="color:#998418;">Server</span><span style="color:#393A34;"> has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using an options object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> options</span><span style="color:#393A34;"> has </span><span style="color:#998418;">an</span><span style="color:#393A34;"> unknown property </span><span style="color:#A0ADA0;">&#39;contentBase&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#393A34;">   object { allowedHosts?,</span><span style="color:#B07D48;"> bonjour</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> client</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> compress</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> devMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> headers</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> historyApiFallback</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> host</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> hot</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> http2</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> https</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> ipc</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> liveReload</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> magicHtml</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onAfterSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onBeforeSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onListening</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> open</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> port</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> proxy</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> setupExitSignals</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> static</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> watchFiles</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> webSocketServer</span><span style="color:#393A34;">? }</span></span>
<span class="line"></span></code></pre></div><p>contentBase用来设置项目跑在本地时，不由webpack打包生成的文件的位置。</p><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    contentBase: PATH.appDirectory,</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    contentBase: PATH.appDirectory,</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>devServer的v4中contentBase迁移到了static下，并且static的默认值是path.resolve(process.cwd(), &#39;public&#39;) 。改成：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    static: [</span></span>
<span class="line"><span style="color:#dbd7caee;">      {</span></span>
<span class="line"><span style="color:#dbd7caee;">        directory: PATH.appDirectory,</span></span>
<span class="line"><span style="color:#dbd7caee;">      },</span></span>
<span class="line"><span style="color:#dbd7caee;">    ],</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    static: [</span></span>
<span class="line"><span style="color:#393a34;">      {</span></span>
<span class="line"><span style="color:#393a34;">        directory: PATH.appDirectory,</span></span>
<span class="line"><span style="color:#393a34;">      },</span></span>
<span class="line"><span style="color:#393a34;">    ],</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="webpack-dev-server-disablehostcheck报错" tabindex="-1">webpack-dev-server disableHostCheck报错 <a class="header-anchor" href="#webpack-dev-server-disablehostcheck报错" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Invalid options object. Dev </span><span style="color:#B8A965;">Server</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">been</span><span style="color:#DBD7CAEE;"> initialized using an options object that does </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> match the API schema.</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> options</span><span style="color:#DBD7CAEE;"> has </span><span style="color:#B8A965;">an</span><span style="color:#DBD7CAEE;"> unknown property </span><span style="color:#758575DD;">&#39;disableHostCheck&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   object { allowedHosts?,</span><span style="color:#BD976A;"> bonjour</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> client</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> compress</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> devMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> headers</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> historyApiFallback</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> host</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> hot</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> http2</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> https</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> ipc</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> liveReload</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> magicHtml</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onAfterSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onBeforeSetupMiddleware</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> onListening</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> open</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> port</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> proxy</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> setupExitSignals</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> static</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> watchFiles</span><span style="color:#DBD7CAEE;">?,</span><span style="color:#BD976A;"> webSocketServer</span><span style="color:#DBD7CAEE;">? }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Invalid options object. Dev </span><span style="color:#998418;">Server</span><span style="color:#393A34;"> has </span><span style="color:#998418;">been</span><span style="color:#393A34;"> initialized using an options object that does </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> match the API schema.</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> options</span><span style="color:#393A34;"> has </span><span style="color:#998418;">an</span><span style="color:#393A34;"> unknown property </span><span style="color:#A0ADA0;">&#39;disableHostCheck&#39;. These properties are valid:</span></span>
<span class="line"><span style="color:#393A34;">   object { allowedHosts?,</span><span style="color:#B07D48;"> bonjour</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> client</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> compress</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> devMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> headers</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> historyApiFallback</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> host</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> hot</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> http2</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> https</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> ipc</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> liveReload</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> magicHtml</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onAfterSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onBeforeSetupMiddleware</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> onListening</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> open</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> port</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> proxy</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> setupExitSignals</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> static</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> watchFiles</span><span style="color:#393A34;">?,</span><span style="color:#B07D48;"> webSocketServer</span><span style="color:#393A34;">? }</span></span>
<span class="line"></span></code></pre></div><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    disableHostCheck: true,</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    disableHostCheck: true,</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>改成：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">devServer: {</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    allowedHosts: &quot;all&quot;,</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">devServer: {</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    allowedHosts: &quot;all&quot;,</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="移除-node-js-polyfill" tabindex="-1">移除 node.js polyfill <a class="header-anchor" href="#移除-node-js-polyfill" aria-hidden="true">#</a></h2><div class="language-vb"><button title="Copy Code" class="copy"></button><span class="lang">vb</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">Module </span><span style="color:#CB7676;">not</span><span style="color:#DBD7CAEE;"> found: Error: Can</span><span style="color:#758575DD;">&#39;t resolve &#39;crypto&#39; in &#39;/xxx/node_modules/crypto-js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">BREAKING CHANGE: </span><span style="color:#BD976A;">webpack</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#DBD7CAEE;"> used </span><span style="color:#4D9375;">to</span><span style="color:#DBD7CAEE;"> include polyfills </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> node.js core modules by </span><span style="color:#CB7676;">default</span><span style="color:#DBD7CAEE;">.</span></span>
<span class="line"><span style="color:#DBD7CAEE;">This is no longer the </span><span style="color:#4D9375;">case</span><span style="color:#DBD7CAEE;">. Verify </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> you need this module </span><span style="color:#CB7676;">and</span><span style="color:#DBD7CAEE;"> configure a polyfill </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> it.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">If</span><span style="color:#DBD7CAEE;"> you want </span><span style="color:#4D9375;">to</span><span style="color:#DBD7CAEE;"> include a polyfill,</span><span style="color:#BD976A;"> you</span><span style="color:#DBD7CAEE;"> need </span><span style="color:#4D9375;">to</span><span style="color:#DBD7CAEE;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> add</span><span style="color:#DBD7CAEE;"> a fallback </span><span style="color:#758575DD;">&#39;resolve.fallback: { &quot;crypto&quot;: require.resolve(&quot;crypto-browserify&quot;) }&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;"> install</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">&#39;crypto-browserify&#39;</span></span>
<span class="line"><span style="color:#4D9375;">If</span><span style="color:#DBD7CAEE;"> you don</span><span style="color:#758575DD;">&#39;t want to include a polyfill, you can use an empty module like this:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	resolve.fallback: { </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">crypto</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">:</span><span style="color:#4D9375;"> false</span><span style="color:#DBD7CAEE;"> }</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">Module </span><span style="color:#AB5959;">not</span><span style="color:#393A34;"> found: Error: Can</span><span style="color:#A0ADA0;">&#39;t resolve &#39;crypto&#39; in &#39;/xxx/node_modules/crypto-js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">BREAKING CHANGE: </span><span style="color:#B07D48;">webpack</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#393A34;"> used </span><span style="color:#1E754F;">to</span><span style="color:#393A34;"> include polyfills </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> node.js core modules by </span><span style="color:#AB5959;">default</span><span style="color:#393A34;">.</span></span>
<span class="line"><span style="color:#393A34;">This is no longer the </span><span style="color:#1E754F;">case</span><span style="color:#393A34;">. Verify </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> you need this module </span><span style="color:#AB5959;">and</span><span style="color:#393A34;"> configure a polyfill </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> it.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">If</span><span style="color:#393A34;"> you want </span><span style="color:#1E754F;">to</span><span style="color:#393A34;"> include a polyfill,</span><span style="color:#B07D48;"> you</span><span style="color:#393A34;"> need </span><span style="color:#1E754F;">to</span><span style="color:#393A34;">:</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> add</span><span style="color:#393A34;"> a fallback </span><span style="color:#A0ADA0;">&#39;resolve.fallback: { &quot;crypto&quot;: require.resolve(&quot;crypto-browserify&quot;) }&#39;</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#AB5959;">-</span><span style="color:#B07D48;"> install</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">&#39;crypto-browserify&#39;</span></span>
<span class="line"><span style="color:#1E754F;">If</span><span style="color:#393A34;"> you don</span><span style="color:#A0ADA0;">&#39;t want to include a polyfill, you can use an empty module like this:</span></span>
<span class="line"><span style="color:#393A34;">	resolve.fallback: { </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">crypto</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">:</span><span style="color:#1E754F;"> false</span><span style="color:#393A34;"> }</span></span>
<span class="line"></span></code></pre></div><p>webpack5 以前，webpack 会包含 nodejs 核心模块的 polyfill，这样的话，比如安装了一个crypto模块，那么就可以直接使用，因为 node 的polyfill会自动启动。现在，webpack5 移除了 nodejs 的 polyfill，无法再直接使用类似crypto的模块了。</p><p>如果你想要使用类似crypto的 nodejs 核心模块，有两种方法：</p><ol><li>在 webpack 配置文件的resolve中配置fallback</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">...</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">resolve</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">fallback</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">crypto</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">require</span><span style="color:#666666;">.</span><span style="color:#80A665;">resolve</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">crypto-browserify</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">),</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 如果不需要，那么就直接改为 false 就可以了</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">...</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">resolve</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">fallback</span><span style="color:#999999;">:</span><span style="color:#393A34;">  </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">crypto</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">require</span><span style="color:#999999;">.</span><span style="color:#59873A;">resolve</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">crypto-browserify</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">),</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 如果不需要，那么就直接改为 false 就可以了</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>如果觉得上面的方法很麻烦，那么可以使用node-polyfill-webpack-plugin：</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">const NodePolyfillPlugin = require(&#39;node-polyfill-webpack-plugin&#39;)</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span>
<span class="line"><span style="color:#dbd7caee;">{</span></span>
<span class="line"><span style="color:#dbd7caee;">  ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  plugins: [</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    new NodePolyfillPlugin(),</span></span>
<span class="line"><span style="color:#dbd7caee;">    ...</span></span>
<span class="line"><span style="color:#dbd7caee;">  ]</span></span>
<span class="line"><span style="color:#dbd7caee;">}</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">const NodePolyfillPlugin = require(&#39;node-polyfill-webpack-plugin&#39;)</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">{</span></span>
<span class="line"><span style="color:#393a34;">  ...</span></span>
<span class="line"><span style="color:#393a34;">  plugins: [</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">    new NodePolyfillPlugin(),</span></span>
<span class="line"><span style="color:#393a34;">    ...</span></span>
<span class="line"><span style="color:#393a34;">  ]</span></span>
<span class="line"><span style="color:#393a34;">}</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="导入json文件语法改变" tabindex="-1">导入json文件语法改变 <a class="header-anchor" href="#导入json文件语法改变" aria-hidden="true">#</a></h2><p>export &#39;orderLimit&#39;.&#39;group_ids&#39;.&#39;includes&#39; (imported as &#39;orderLimit&#39;) was not found in &#39;../../../custom.config.json&#39; (possible exports: 0, 1, 2)</p><p>原来：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// custom.config.json</span></span>
<span class="line"><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">orderLimit</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">group_ids</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">xxx</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">desc</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">xxx</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// 原来引用文件方式</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">orderLimit</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">../../../custom.config.json</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// custom.config.json</span></span>
<span class="line"><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">orderLimit</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;">: </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">group_ids</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">xxx</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">desc</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">xxx</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// 原来引用文件方式</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">orderLimit</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">../../../custom.config.json</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>改成：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">orderLimit</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&#39;</span><span style="color:#C98A7D;">../../../custom.config.json</span><span style="color:#C98A7DAA;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">orderLimit</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">../../../custom.config.json</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="打包报错unknown-option-p" tabindex="-1">打包报错unknown option &#39;-p&#39; <a class="header-anchor" href="#打包报错unknown-option-p" aria-hidden="true">#</a></h2><p>[webpack-cli] Error: Unknown option &#39;-p&#39;</p><p>原本的打包命令文件：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">shellExec(</span></span>
<span class="line"><span style="color:#dbd7caee;">  &#39;webpack -p --color --config &#39; + require.resolve(&#39;../config/webpack.config&#39;),</span></span>
<span class="line"><span style="color:#dbd7caee;">)</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">shellExec(</span></span>
<span class="line"><span style="color:#393a34;">  &#39;webpack -p --color --config &#39; + require.resolve(&#39;../config/webpack.config&#39;),</span></span>
<span class="line"><span style="color:#393a34;">)</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>改成如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">shellExec(</span></span>
<span class="line"><span style="color:#dbd7caee;">  &#39;webpack --mode production --color --config &#39; + require.resolve(&#39;../config/webpack.config&#39;),</span></span>
<span class="line"><span style="color:#dbd7caee;">)</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">shellExec(</span></span>
<span class="line"><span style="color:#393a34;">  &#39;webpack --mode production --color --config &#39; + require.resolve(&#39;../config/webpack.config&#39;),</span></span>
<span class="line"><span style="color:#393a34;">)</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><h2 id="node版本过低" tabindex="-1">node版本过低 <a class="header-anchor" href="#node版本过低" aria-hidden="true">#</a></h2><p>eslint@8.15.0: The engine &quot;node&quot; is incompatible with this module. Expected version &quot;^12.22.0 || ^14.17.0 || &gt;=16.0.0&quot;. Got &quot;14.15.4&quot;</p><p>项目跑 CI/CD 的时候报错说 CI/CD 的 node 镜像版本偏低了。现在 eslint 要求的 node 版本是16以上，但是公司 CI/CD 的 node 版本是14。于是找负责运维的同事帮忙升级了 node 版本。</p><h2 id="图片编译问题" tabindex="-1">图片编译问题 <a class="header-anchor" href="#图片编译问题" aria-hidden="true">#</a></h2><p>原来的配置：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">          {</span></span>
<span class="line"><span style="color:#dbd7caee;">            test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],</span></span>
<span class="line"><span style="color:#dbd7caee;">            loader: require.resolve(&#39;url-loader&#39;),</span></span>
<span class="line"><span style="color:#dbd7caee;">            options: {</span></span>
<span class="line"><span style="color:#dbd7caee;">              limit: 10000,</span></span>
<span class="line"><span style="color:#dbd7caee;">              name: &#39;media/image/[name].[hash:8].[ext]&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">            },</span></span>
<span class="line"><span style="color:#dbd7caee;">          },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">          {</span></span>
<span class="line"><span style="color:#393a34;">            test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],</span></span>
<span class="line"><span style="color:#393a34;">            loader: require.resolve(&#39;url-loader&#39;),</span></span>
<span class="line"><span style="color:#393a34;">            options: {</span></span>
<span class="line"><span style="color:#393a34;">              limit: 10000,</span></span>
<span class="line"><span style="color:#393a34;">              name: &#39;media/image/[name].[hash:8].[ext]&#39;,</span></span>
<span class="line"><span style="color:#393a34;">            },</span></span>
<span class="line"><span style="color:#393a34;">          },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>之前处理图片用的是url-loader。如果图片比较小那么会被编译成base64的格式，然后和项目代码打包在一起；如果是比较大的图片则会放在build/media/image文件夹下。然而升级到 webpack5 以后出现了下面的情况： <img src="/assets/image5.74666a73.png" alt="image.png"></p><p>图片除了按要求放在build/media/image文件夹下，竟然还多存了一份直接放在了build文件夹下。而且项目代码中图片的引用路径指向了这些放错位置的图片，但是这些图片的格式又是错误的，根本显示不了图像。</p><p>在网上查了一下，上面的现象是因为 webpack5 已经自带了图片解析功能，再使用 url-loader 的话会出现图片重复打包的问题。现在有两种解决方案：</p><ol><li>继续使用url-loader，可以参考这篇文章：webpack5用url-loader打包后出现图片打不开、资源重复 。</li><li>改用webpack5自身来解析图片</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">          {</span></span>
<span class="line"><span style="color:#dbd7caee;">            test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],</span></span>
<span class="line"><span style="color:#dbd7caee;">            type: &#39;asset&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">            parser: {</span></span>
<span class="line"><span style="color:#dbd7caee;">              dataUrlCondition: {</span></span>
<span class="line"><span style="color:#dbd7caee;">                maxSize: 10000,</span></span>
<span class="line"><span style="color:#dbd7caee;">              },</span></span>
<span class="line"><span style="color:#dbd7caee;">            },</span></span>
<span class="line"><span style="color:#dbd7caee;">            generator: {</span></span>
<span class="line"><span style="color:#dbd7caee;">              filename: &#39;media/image/[name].[hash:8].[ext]&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">            },</span></span>
<span class="line"><span style="color:#dbd7caee;">          },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">          {</span></span>
<span class="line"><span style="color:#393a34;">            test: [/\.bmp$/, /\.gif$/, /\.jpe?g$/, /\.png$/],</span></span>
<span class="line"><span style="color:#393a34;">            type: &#39;asset&#39;,</span></span>
<span class="line"><span style="color:#393a34;">            parser: {</span></span>
<span class="line"><span style="color:#393a34;">              dataUrlCondition: {</span></span>
<span class="line"><span style="color:#393a34;">                maxSize: 10000,</span></span>
<span class="line"><span style="color:#393a34;">              },</span></span>
<span class="line"><span style="color:#393a34;">            },</span></span>
<span class="line"><span style="color:#393a34;">            generator: {</span></span>
<span class="line"><span style="color:#393a34;">              filename: &#39;media/image/[name].[hash:8].[ext]&#39;,</span></span>
<span class="line"><span style="color:#393a34;">            },</span></span>
<span class="line"><span style="color:#393a34;">          },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>看了一下npm，url-loader已经两年没有更新了。稳妥起见，还是选择webpack自带的图片解析吧。</p><h2 id="打包文件命名问题" tabindex="-1">打包文件命名问题 <a class="header-anchor" href="#打包文件命名问题" aria-hidden="true">#</a></h2><p>webpack4的时候，代码编译后的文件夹命名是按顺序自增的数字id： <img src="/assets/image6.79d04405.png" alt="image.png"></p><p>这样就存在一个问题，如果命名排在前面的模块被移除了，那么后面的模块就会补位，这会导致即使后续模块内容没有发生变化，但是因为文件夹名称发生了改变，之前的缓存就会失效了。</p><p>现在webpack5让开发者可以自己设置chunk和module的命名方式：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">optimization: {</span></span>
<span class="line"><span style="color:#dbd7caee;">  chunkIds: &#39;named&#39;, // &#39;natural&#39; | &#39;named&#39; | &#39;size&#39; | &#39;deterministic&#39;</span></span>
<span class="line"><span style="color:#dbd7caee;">  moduleIds: &#39;named&#39;,</span></span>
<span class="line"><span style="color:#dbd7caee;">}</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">optimization: {</span></span>
<span class="line"><span style="color:#393a34;">  chunkIds: &#39;named&#39;, // &#39;natural&#39; | &#39;named&#39; | &#39;size&#39; | &#39;deterministic&#39;</span></span>
<span class="line"><span style="color:#393a34;">  moduleIds: &#39;named&#39;,</span></span>
<span class="line"><span style="color:#393a34;">}</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><ul><li>natural 是webpack5以前生产模式下的命名方式。</li><li>named 是根据项目文件路径生成名称，webpack以前和现在的开发模式默认使用这种命名方式</li><li>size 是根据模块大小来生成数字。</li><li>deterministic 是webpack5新增的命名方式，根据文件名称生成短hash，webpack5生产模式下默认启用。</li></ul><h2 id="废弃了moduleconcatenationplugin" tabindex="-1">废弃了ModuleConcatenationPlugin <a class="header-anchor" href="#废弃了moduleconcatenationplugin" aria-hidden="true">#</a></h2><p>项目打包完在线上运行的时候出现了报错： Uncaught TypeError: Cannot read properties of undefined (reading &#39;call&#39;)</p><p>错的是这段代码：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">__webpack_require__</span><span style="color:#666666;">(</span><span style="color:#BD976A;">moduleId</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cachedModule</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">__webpack_module_cache__</span><span style="color:#666666;">[</span><span style="color:#BD976A;">moduleId</span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">!==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cachedModule</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cachedModule</span><span style="color:#666666;">.</span><span style="color:#BD976A;">exports</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#CB7676;">var</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">module</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">__webpack_module_cache__</span><span style="color:#666666;">[</span><span style="color:#BD976A;">moduleId</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#B8A965;">id</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">moduleId</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#B8A965;">loaded</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">!</span><span style="color:#4C9A91;">1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#B8A965;">exports</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#BD976A;">__webpack_modules__</span><span style="color:#666666;">[</span><span style="color:#BD976A;">moduleId</span><span style="color:#666666;">].</span><span style="color:#80A665;">call</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">				</span><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">				</span><span style="color:#B8A965;">module</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">				</span><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">				</span><span style="color:#BD976A;">__webpack_require__</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#666666;">),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#666666;">(</span><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">loaded</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">!</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">			</span><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span></span>
<span class="line"><span style="color:#DBD7CAEE;">		</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">	</span><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">__webpack_require__</span><span style="color:#999999;">(</span><span style="color:#B07D48;">moduleId</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cachedModule</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">__webpack_module_cache__</span><span style="color:#999999;">[</span><span style="color:#B07D48;">moduleId</span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!==</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cachedModule</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cachedModule</span><span style="color:#999999;">.</span><span style="color:#B07D48;">exports</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#AB5959;">var</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">module</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">__webpack_module_cache__</span><span style="color:#999999;">[</span><span style="color:#B07D48;">moduleId</span><span style="color:#999999;">]</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#998418;">id</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">moduleId</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#998418;">loaded</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!</span><span style="color:#2F798A;">1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#998418;">exports</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{},</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#999999;">})</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#B07D48;">__webpack_modules__</span><span style="color:#999999;">[</span><span style="color:#B07D48;">moduleId</span><span style="color:#999999;">].</span><span style="color:#59873A;">call</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">				</span><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">				</span><span style="color:#998418;">module</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">				</span><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">				</span><span style="color:#B07D48;">__webpack_require__</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#999999;">),</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#999999;">(</span><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">loaded</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!</span><span style="color:#2F798A;">0</span><span style="color:#999999;">),</span></span>
<span class="line"><span style="color:#393A34;">			</span><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span></span>
<span class="line"><span style="color:#393A34;">		</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">	</span><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><p>webpack实现了一个加载函数 <strong>webpack_require</strong>(moduleId) 来加载模块。这个函数做了这些事情：</p><ul><li>根据模块Id在缓存中找是否有这个模块，如果有直接从缓存拿</li><li>如果缓存没有，那么先新建这个模块的缓存，然后再返回模块</li></ul><p><strong>webpack_modules</strong>[moduleId].call() 会报错八成是因为webpack找不到对应模块，<strong>webpack_modules</strong>[moduleId] 的结果是 undefined 。 顺着控制台列出来的报错文件继续往下看，看看是哪里调用了 <strong>webpack_require</strong>(moduleId) ：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">    &quot;./node_modules/@babel/runtime/helpers/esm/slicedToArray.js&quot;: function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {</span></span>
<span class="line"><span style="color:#dbd7caee;">        &quot;use strict&quot;;</span></span>
<span class="line"><span style="color:#dbd7caee;">       ...</span></span>
<span class="line"><span style="color:#dbd7caee;">        var arrayWithHoles = __webpack_require__(null);</span></span>
<span class="line"><span style="color:#dbd7caee;">        var unsupportedIterableToArray = __webpack_require__(null)</span></span>
<span class="line"><span style="color:#dbd7caee;">          , nonIterableRest = __webpack_require__(null);</span></span>
<span class="line"><span style="color:#dbd7caee;">        ...</span></span>
<span class="line"><span style="color:#dbd7caee;">    },</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">    &quot;./node_modules/@babel/runtime/helpers/esm/slicedToArray.js&quot;: function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {</span></span>
<span class="line"><span style="color:#393a34;">        &quot;use strict&quot;;</span></span>
<span class="line"><span style="color:#393a34;">       ...</span></span>
<span class="line"><span style="color:#393a34;">        var arrayWithHoles = __webpack_require__(null);</span></span>
<span class="line"><span style="color:#393a34;">        var unsupportedIterableToArray = __webpack_require__(null)</span></span>
<span class="line"><span style="color:#393a34;">          , nonIterableRest = __webpack_require__(null);</span></span>
<span class="line"><span style="color:#393a34;">        ...</span></span>
<span class="line"><span style="color:#393a34;">    },</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>破案了，显然 <strong>webpack_require</strong>(null) 是有问题的。</p><p>在网上搜了一下，找到了解决方案： <img src="/assets/image7.43afa921.png" alt="image.png"></p><p>之前公司webapck4的配置中，在生产环境会启用 new webpack.optimize.ModuleConcatenationPlugin() ：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#dbd7caee;">plugins: [</span></span>
<span class="line"><span style="color:#dbd7caee;">  !isEnvDevelopment &amp;&amp; new webpack.optimize.ModuleConcatenationPlugin()</span></span>
<span class="line"><span style="color:#dbd7caee;">]</span></span>
<span class="line"><span style="color:#dbd7caee;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393a34;">plugins: [</span></span>
<span class="line"><span style="color:#393a34;">  !isEnvDevelopment &amp;&amp; new webpack.optimize.ModuleConcatenationPlugin()</span></span>
<span class="line"><span style="color:#393a34;">]</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>看了一下webpack的开发文档，webpack在打包的时候会将各个模块打包成闭包，用了ModuleConcatenationPlugin之后会尽可能将模块放到一个闭包内，这样会提升代码在浏览器中的执行速度。这种操作还有一个专业名词，叫 Scope Hoisting，意思就是作用域提升。</p><p>不过现在ModuleConcatenationPlugin已经废弃了，把上面的代码删除以后，项目就能正常运行了。</p><h2 id="升级前后对比" tabindex="-1">升级前后对比 <a class="header-anchor" href="#升级前后对比" aria-hidden="true">#</a></h2><p><img src="/assets/image8.82d81747.png" alt="image.png"></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-97ada51d data-v-fec45cf1><!----><div class="prev-next" data-v-fec45cf1><div class="pager" data-v-fec45cf1><a class="pager-link prev" href="/JavaScript/Engineering/Webpack4V5.html" data-v-fec45cf1><span class="desc" data-v-fec45cf1>Previous page</span><span class="title" data-v-fec45cf1>Webpack对比</span></a></div><div class="has-prev pager" data-v-fec45cf1><a class="pager-link next" href="/JavaScript/Engineering/CodeStandard.html" data-v-fec45cf1><span class="desc" data-v-fec45cf1>Next page</span><span class="title" data-v-fec45cf1>规范化标准</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-04c1d245 data-v-e01008a6><div class="container" data-v-e01008a6><p class="message" data-v-e01008a6>Released under the MIT License.</p><p class="copyright" data-v-e01008a6>Copyright © 2022-present Attraction11</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"framework_react_cssinjs.md\":\"b405c552\",\"framework_react_mobx6.md\":\"e26d69f2\",\"framework_react_qa.md\":\"caae10b9\",\"framework_react_react.md\":\"da0fbbb7\",\"framework_react_react16code.md\":\"b9735d59\",\"framework_react_react18_新特性.md\":\"e916ff87\",\"framework_react_reactdiff.md\":\"ba924758\",\"framework_react_reacthooks.md\":\"2ac7d7b8\",\"framework_react_reactoptimize.md\":\"cfae83dd\",\"framework_react_reactredux.md\":\"bdffda65\",\"framework_react_reactrouter.md\":\"7683c401\",\"framework_react_redux.md\":\"bf610a4e\",\"framework_react_reduxcode.md\":\"bad82ba2\",\"framework_react_reduxormobx.md\":\"4fafe045\",\"framework_render_nextjs.md\":\"cef9d650\",\"framework_render_nuxtbase.md\":\"c69360a7\",\"framework_render_reactssr.md\":\"cab218fd\",\"framework_render_serverender.md\":\"8548e715\",\"framework_render_vuessr.md\":\"17875cb7\",\"framework_render_index.md\":\"e78cec9a\",\"framework_staticsite_gatsby.md\":\"56c82cd4\",\"framework_staticsite_gridsome.md\":\"80bf7ffa\",\"framework_vue_introduce.md\":\"22f608d4\",\"framework_vue_qa.md\":\"23e8a066\",\"framework_vue_vuecore.md\":\"dbd0e7a0\",\"framework_vue_vuerouter.md\":\"b5cd0b60\",\"framework_vue_vuex.md\":\"c5dcb6db\",\"fullstack_docker_introduce.md\":\"fcd9025b\",\"fullstack_graphql_apollo.md\":\"ec6466d0\",\"fullstack_graphql_first.md\":\"d5a86ed4\",\"fullstack_graphql_qa.md\":\"599b09e0\",\"fullstack_graphql_type.md\":\"66f86bbb\",\"fullstack_graphql_index.md\":\"24ac8a01\",\"fullstack_mongodb_introduce.md\":\"002e02e8\",\"fullstack_nest_introduce.md\":\"b7d0cf16\",\"fullstack_nest_nestdev.md\":\"c792f13f\",\"fullstack_nest_nestlesson.md\":\"07f22af2\",\"fullstack_nginx_index.md\":\"7d234b6e\",\"fullstack_node_comparison.md\":\"3f8a82c0\",\"fullstack_node_eggdev.md\":\"23475909\",\"fullstack_node_expressdev.md\":\"da9cca53\",\"fullstack_node_fileopt.md\":\"51ecf145\",\"fullstack_node_introduce.md\":\"e512ccce\",\"fullstack_node_keepsession.md\":\"9e83c59e\",\"fullstack_node_koadev.md\":\"a34e553f\",\"fullstack_node_module.md\":\"fe041496\",\"fullstack_node_nodebase.md\":\"7caf744c\",\"fullstack_node_nodecore.md\":\"ee065dbb\",\"fullstack_node_nodedev.md\":\"ebb552d8\",\"fullstack_node_nodemessage.md\":\"4d7fd323\",\"fullstack_node_nodeqa.md\":\"f5d35ed1\",\"fullstack_redis_crud.md\":\"41af32ca\",\"fullstack_redis_client.md\":\"bdb29dc4\",\"fullstack_redis_cluster.md\":\"c7eb1897\",\"fullstack_redis_config.md\":\"a271c38e\",\"fullstack_redis_connect.md\":\"eea88f70\",\"fullstack_redis_expire.md\":\"e01142d1\",\"fullstack_redis_introduce.md\":\"d5675ace\",\"fullstack_redis_moredb.md\":\"86a9509e\",\"fullstack_redis_multi.md\":\"ad6dac57\",\"fullstack_redis_persistence.md\":\"9ed4888e\",\"fullstack_redis_setup.md\":\"d018235f\",\"fullstack_redis_softadmin.md\":\"a06744f7\",\"javascript_asynchronous_heap_stack.md\":\"c908a732\",\"javascript_asynchronous_index.md\":\"d89064a8\",\"javascript_asynchronous_jsconcepts.md\":\"01e1b61c\",\"javascript_asynchronous_objectoriented.md\":\"9d4bb3c5\",\"javascript_asynchronous_promise.md\":\"594557f0\",\"javascript_asynchronous_promisecode.md\":\"9a37ae9c\",\"javascript_asynchronous_this.md\":\"ca458e3b\",\"javascript_esfeatures_index.md\":\"77daa4ae\",\"javascript_engineering_automate.md\":\"060e338b\",\"javascript_engineering_codestandard.md\":\"555bd4c5\",\"javascript_engineering_webpack.md\":\"cf9464ac\",\"javascript_engineering_webpack4v5.md\":\"af255c53\",\"javascript_engineering_webpacktov5.md\":\"fcc6a7b7\",\"javascript_engineering_index.md\":\"3e94bba8\",\"javascript_functional_closure.md\":\"1b324241\",\"javascript_functional_combination.md\":\"d89276c2\",\"javascript_functional_currying.md\":\"d3b7b1dc\",\"javascript_functional_index.md\":\"187b09c2\",\"javascript_functional_purefunction.md\":\"d18cace5\",\"javascript_htmlcss_flex.md\":\"2a59794b\",\"javascript_htmlcss_grid.md\":\"98bd2f2b\",\"javascript_htmlcss_index.md\":\"3c773fde\",\"javascript_htmlcss_layout.md\":\"3b573304\",\"javascript_htmlcss_randomrecord.md\":\"06c7f211\",\"javascript_htmlcss_skill.md\":\"118c50fb\",\"javascript_jscore_arrayapi.md\":\"7f984cfd\",\"javascript_jscore_arraycode.md\":\"a2103811\",\"javascript_jscore_arrayflat.md\":\"412e62e5\",\"javascript_jscore_arraylike.md\":\"7633db07\",\"javascript_jscore_arraysort.md\":\"082013ad\",\"javascript_jscore_call.md\":\"83f111c7\",\"javascript_jscore_closure.md\":\"4548303c\",\"javascript_jscore_copy.md\":\"ab7f845c\",\"javascript_jscore_inherit.md\":\"48595ed0\",\"javascript_jscore_stringify.md\":\"1752e3e1\",\"javascript_jscore_theorysort.md\":\"a9dfec06\",\"javascript_jscore_demo_demo.md\":\"d2fd551e\",\"javascript_jscore_index.md\":\"b764da8d\",\"javascript_leetcode_array.md\":\"d3ab0455\",\"javascript_leetcode_index.md\":\"e9d73ca4\",\"javascript_module_two.md\":\"a8525df3\",\"javascript_module_index.md\":\"d0e6e6b0\",\"javascript_performance_check.md\":\"59a00b5a\",\"javascript_performance_execute.md\":\"193056c6\",\"javascript_performance_optimize.md\":\"58964c17\",\"javascript_performance_overall.md\":\"1e89aea3\",\"javascript_performance_index.md\":\"9351811b\",\"javascript_typescript_tooltype.md\":\"89eef926\",\"javascript_typescript_index.md\":\"d128553c\",\"javascript_websafety_transfer.md\":\"ed09f5fe\",\"javascript_websafety_index.md\":\"9d9996d1\",\"panclient_electron_application.md\":\"12226b48\",\"panclient_electron_index.md\":\"51838ff0\",\"panclient_rn_architecture.md\":\"8b36ddff\",\"panclient_rn_component.md\":\"4e586186\",\"panclient_rn_projectdemo.md\":\"b706a890\",\"panclient_rn_randomrecord.md\":\"1389a5e4\",\"panclient_rn_router_nav.md\":\"7e1172e9\",\"panclient_rn_setup.md\":\"050d00ac\",\"panclient_rn_stylesheet.md\":\"1a234ab4\",\"panclient_rn_index.md\":\"5bf9ccbb\",\"panclient_uniapp_projectdemo.md\":\"b20e12e2\",\"panclient_uniapp_index.md\":\"7d6a3322\",\"programtopics_businessscene_experience.md\":\"bd7cd079\",\"programtopics_businessscene_lazy.md\":\"af2584ec\",\"programtopics_businessscene_login.md\":\"bff89d44\",\"programtopics_businessscene_qrcode.md\":\"d599d748\",\"programtopics_businessscene_refresh.md\":\"2d8379d0\",\"programtopics_datavisualization_webcli.md\":\"63435906\",\"programtopics_interviewbible_check.md\":\"516ab026\",\"programtopics_interviewbible_index.md\":\"ce92779d\",\"programtopics_microfrontend_webcli.md\":\"2a5512a0\",\"programtopics_serverless_webcli.md\":\"f28083bf\",\"programtopics_testautomation_webcli.md\":\"c98285cd\",\"readme.md\":\"51b04d0b\",\"sites.md\":\"e9d83594\",\"index.md\":\"ddbf33f0\",\"notes_git常用操作.md\":\"823e7387\",\"notes_linux基本命令.md\":\"fa2314a0\",\"notes_nginx基本使用.md\":\"79820a84\",\"notes_regexp介绍与使用.md\":\"a22c56e8\",\"notes_vscode插件开发.md\":\"f0997f33\",\"notes_力扣题记录.md\":\"02070cc1\",\"notes_小程序开发记录.md\":\"064c06c4\",\"notes_常用快捷键.md\":\"6eec0ea0\",\"notes_排序算法.md\":\"e519692c\",\"notes_收录精选书籍.md\":\"9f7d486b\",\"notes_网络相关知识.md\":\"c9093ab1\",\"notes_面试软技能.md\":\"679c35fe\"}")</script>
    <script type="module" async src="/assets/app.b5247682.js"></script>
    
  </body>
</html>